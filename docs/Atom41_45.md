# Atomic Kotlin 41 ~ 45

## Atom41 ì œë„¤ë¦­ìŠ¤ ì†Œê°œ

- ì œë„¤ë¦­ì˜ ì •ì˜
  - íƒ€ì…ì˜ í”Œë ˆì´ìŠ¤í™€ë”. ì•„ì§ ì •í•´ì§€ì§€ ì•Šì€ íƒ€ì…ì„ ëŒ€ì‹ í•´ì„œ ë³´ì—¬ì¤€ë‹¤ëŠ” ì˜ë¯¸ë¡œ ì´í•´
  - í´ë˜ìŠ¤ë‚˜ í•¨ìˆ˜ë¥¼ ì‘ì„±í•  ë•Œ **íƒ€ì… ì œì•½ì„ ëŠìŠ¨í•˜ê²Œ** í•´ì„œ í”„ë¡œê·¸ë˜ë¨¸ì—ê²Œ í‘œí˜„ë ¥ì„ ìµœëŒ€ë¡œ ì œê³µí•˜ê³ ìí•˜ëŠ” ëª©ì ì—ì„œ ë‚˜ì˜¨ ê²ƒ

```kotlin
  data class Automobile(val brand: String)

  class RigidHolder(private val a: Automobile) {
    fun getValue() = a
  }

  fun main() {
    val holder = RigidHolder(Automobile("BMW"))
    holder.getValue() eq
      "Automobile(brand=BMW)"
  }
```

- RigidHolder ë¼ëŠ” í´ë˜ìŠ¤ì— í•­ìƒ ì¸ìë¡œ `Automobile` ë°–ì— ë°›ì„ ìˆ˜ ì—†ë‹¤. ë‹¤ë¥¸ ë‹¤ì–‘í•œ íƒ€ì…ì„ ë°›ê¸° ìœ„í•´ì„  ê°ê° ë”°ë¡œ ë§Œë“¤ì–´ì¤˜ì•¼í•œë‹¤. â†’ **ì¬ì‚¬ìš©ì„±ì´ ì¢‹ì§€ ì•Šë‹¤.**

- ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ì œë„¤ë¦­ ì‚¬ìš©(ì•„ë˜ ì½”ë“œ)

```kotlin
  class GenericHolder<T>(               // [1]
    private val value: T
  ) {
    fun getValue(): T = value
  }

  fun main() {
    val h1 = GenericHolder(Automobile("Ford"))
    val a: Automobile = h1.getValue()   // [2]
    a eq "Automobile(brand=Ford)"

    val h2 = GenericHolder(1)
    val i: Int = h2.getValue()          // [3]
    i eq 1

    val h3 = GenericHolder("Chartreuse")
    val s: String = h3.getValue()       // [4]
    s eq "Chartreuse"
  }
```

- `class GenericHolder<T>` í´ë˜ìŠ¤ëª… ë’¤ì— `<T>` ë¥¼ í†µí•´ì„œ ì œë„¤ë¦­ì„ ì •ì˜í•˜ê³  í•´ë‹¹ íƒ€ì…ì´ ì–´ë””ì— ì–´ë–»ê²Œ ì‚¬ìš©ë ì§€ ì„¤ì •í•œë‹¤.
  - ìœ„ í´ë˜ìŠ¤ì—ì„œëŠ” ì¸ìë¡œ ë°›ëŠ” íƒ€ì…ê³¼ getValueê°€ ë¦¬í„´í•˜ëŠ” íƒ€ì…ì´ ê°™ë‹¤.
- `<T>` ì—ëŠ” í•´ë‹¹ í´ë˜ìŠ¤ê°€ ì‹¤ì œë¡œ ì‚¬ìš©ë˜ê¸° ì „ê¹Œì§€ëŠ” ì–´ë–¤ íƒ€ì…ì´ ë“¤ì–´ì˜¬ì§€ ëª¨ë¥¸ë‹¤. [2]/[3]/[4]ì—ì„œ ì²˜ëŸ¼ ì‹¤ì œë¡œ í´ë˜ìŠ¤ì— íŠ¹ì • íƒ€ì…ì˜ ì¸ìê°€ ë“¤ì–´ì˜¤ê²Œ ë˜ë©´ í•´ë‹¹ íƒ€ì…ì´ ì„¤ì •ëœë‹¤.

<br />

- ìœ ë‹ˆë²„ì„¤ íƒ€ì…
  - ëª¨ë“  íƒ€ì…ì˜ ë¶€ëª¨ íƒ€ì…ì„ ì¼ì»«ëŠ” ìš©ì–´
  - ì½”í‹€ë¦°ì—ì„œëŠ” `Any` : ëª¨ë“  íƒ€ì…ì„ í—ˆìš©í•œë‹¤ëŠ” ì˜ë¯¸
  - ë§Œì•½ ì—¬ëŸ¬ íƒ€ì…ì˜ ê°’ì„ ë„˜ê²¨ì•¼í•˜ëŠ” ê²½ìš°, ê³µí†µì ì´ ì—†ë‹¤ë©´ Any íƒ€ì…ì„ ì œë„¤ë¦­ ëŒ€ì‹  ì„ ì–¸ì´ ê°€ëŠ¥í•´ë³´ì¸ë‹¤.
    - ex. `class GenericHolder<Any>`

<br />

```kotlin
  class AnyHolder(private val value: Any) {
    fun getValue(): Any = value
  }

  class Dog {
    fun bark() = "Ruff!"
  }

  fun main() {
    val holder = AnyHolder(Dog())
    val any = holder.getValue()
    // Doesn't compile:
    // any.bark()

    val genericHolder = GenericHolder(Dog())
    val dog = genericHolder.getValue()
    dog.bark() eq "Ruff!"
  }
```

- `AnyHolder`ì˜ ê²½ìš° ì¸ìë¡œ ë°›ì€ ê°’ì˜ íƒ€ì…ì´ Any íƒ€ì…ìœ¼ë¡œ, getValueì—ì„œ ë¦¬í„´í•˜ëŠ” íƒ€ì… ì—­ì‹œ Any íƒ€ì…ìœ¼ë¡œ ì •ì˜ë˜ì–´ ìˆëŠ” ê²ƒ.

  - ê·¸ë ‡ê¸° ë•Œë¬¸ì— `val any = holder.getValue()` ì˜ anyëŠ” Any íƒ€ì…ì´ê¸° ë•Œë¬¸ì— ~~Any íƒ€ì…ì—ëŠ” bark()ë¼ëŠ” ë©¤ë²„í•¨ìˆ˜ê°€ ì—†ê¸° ë•Œë¬¸ì— ì»´íŒŒì¼ í•  ìˆ˜ ì—†ê²Œ ëœë‹¤.~~

    â†’ **ì„¤ëª… ìˆ˜ì •** : Any íƒ€ì…ìœ¼ë¡œ ì„ ì–¸ëœ ë³€ìˆ˜ê°€ ì‹¤ì œë¡œ ì–´ë–¤ íƒ€ì…ì¸ì§€ ì•Œ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ì•ˆì „í•˜ê²Œ ì ‘ê·¼ì´ ë¶ˆê°€ëŠ¥í•˜ì—¬ ì»´íŒŒì¼ ì—ëŸ¬ê°€ ë°œìƒí•˜ê²Œ ëœë‹¤.

  - ì•„ë˜ì™€ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒ!
    ![atom41_any](/screenshots/atom41_any.png)

- ìœ„ ì˜ˆì œë¥¼ í†µí•œ ì œë„¤ë¦­ê³¼ Anyíƒ€ì…ì„ ì •ë¦¬

  - ì œë„¤ë¦­ íƒ€ì… : ì‹¤í–‰ì‹œì ì— êµ¬ì²´ì ì¸ íƒ€ì…ìœ¼ë¡œ ëŒ€ì²´ë˜ë©° ê·¸ íƒ€ì…ì— ë§ê²Œ ë™ì‘
  - Any íƒ€ì… : ëª¨ë“  íƒ€ì…ì˜ ìŠˆí¼íƒ€ì…ìœ¼ë¡œ, ì–´ë–¤ ê°’ì´ë“  ì°¸ì¡°í•  ìˆ˜ ìˆì§€ë§Œ, ê·¸ ê°’ì˜ êµ¬ì²´ì ì¸ íƒ€ì…ì„ ì•Œ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— í•´ë‹¹ íƒ€ì…ì˜ ë©¤ë²„/ë©¤ë²„í•¨ìˆ˜ì— ì§ì ‘ ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤. ë‹¨, **íƒ€ì… ìºìŠ¤íŒ…ì´ë‚˜ is ì—°ì‚°ìë¥¼ í†µí•˜ë©´ ì ‘ê·¼ì´ ê°€ëŠ¥**

    ```kotlin
    fun main() {
      val holder = AnyHolder(Dog())
      val any = holder.getValue()

      // 1) is ì—°ì‚°ì
      if (any is Dog)
          any.bark()

      // 2) íƒ€ì…ìºìŠ¤íŒ…
      (any as? Dog)?.bark()
    }
    ```

    > ì´ëŸ° ì‹ìœ¼ë¡œ ë³€ê²½í•˜ë©´ ì ‘ê·¼ì´ ê°€ëŠ¥!

    > is ì—°ì‚°ì : `any is Dog` anyê°€ Dog íƒ€ì…ì¸ì§€ë¥¼ í™•ì¸í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë§ë‹¤ë©´ ê·¸ ì´í›„ ì½”ë“œë¥¼ ì‹¤í–‰

    > as / as? : ê°•ì œ íƒ€ì… ìºìŠ¤íŒ… / ì•ˆì „í•œ íƒ€ì… ìºìŠ¤íŒ…
    >
    > > as : ìºìŠ¤íŒ… ì¤‘ ìºìŠ¤íŒ…ì´ ë¶ˆê°€ëŠ¥í•˜ë©´ ì—ëŸ¬(`ClassCastException`) ë°œìƒ
    > > as? : ìºìŠ¤íŒ… ì¤‘ ìºìŠ¤íŒ…ì´ ë¶ˆê°€ëŠ¥í•˜ë©´ null ë°˜í™˜

```kotlin
  fun <T> identity(arg: T): T = arg

  fun main() {
    identity("Yellow") eq "Yellow"
    identity(1) eq 1
    val d: Dog = identity(Dog())
    d.bark() eq "Ruff!"
  }
```

- ì œë„¤ë¦­ í•¨ìˆ˜ì˜ ê²½ìš° ì œë„¤ë¦­ ëª…ì„¸(tsì—ì„œëŠ” íƒ€ì… ë³€ìˆ˜ë¼ê³  ë¶€ë¦„)ë¥¼ í•¨ìˆ˜ ì•ì— ì •ì˜í•œë‹¤.

```kotlin
  fun <T> List<T>.first(): T {
    if (isEmpty())
      throw NoSuchElementException("Empty List")
    return this[0]
  }

  fun <T> List<T>.firstOrNull(): T? =
    if (isEmpty()) null else this[0]

  fun main() {
    listOf(1, 2, 3).first() eq 1

    val i: Int? =                     // [1]
      listOf(1, 2, 3).firstOrNull()
    i eq 1

    val s: String? =                  // [2]
      listOf<String>().firstOrNull()
    s eq null
  }
```

- ì œë„¤ë¦­ í™•ì¥í•¨ìˆ˜ì˜ ê²½ìš°ì—ë„ í™•ì¥ í•¨ìˆ˜ì˜ ìˆ˜ì‹ ê°ì²´ ì•ì— ì œë„¤ë¦­ ëª…ì„¸ë¥¼ ë¶™ì¸ë‹¤.

- ì±…ì—ì„œ ì‹œí—˜ì‚¼ì•„ ì‹ë³„ì ? ë¥¼ ì œê±°í•´ë³´ë¼ê³  í•´ì„œ ì œê±°í•´ë´„! ğŸ˜ˆ ì˜ˆìƒí–ˆë“¯ì´ `firstOrNull()`ì˜ ë°˜í™˜ íƒ€ì…ê³¼ íƒ€ì…ì´ ë§ì§€ ì•Šê¸°ë•Œë¬¸ì— íƒ€ì…ì˜¤ë¥˜ê°€ ë…¸ì¶œëœë‹¤.
  ![atom41_generic_extension](/screenshots/atom41_generic_extension.png)

## Atom42

## Atom43

## Atom44

## Atom45
